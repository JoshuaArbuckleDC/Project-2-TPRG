import socket
import os
import json
import time
import tkinter as tk

# Function to retrieve system information
def get_system_info():
    core_temp = os.popen('vcgencmd measure_temp').readline().strip()[5:]
    voltage = os.popen('vcgencmd measure_volts').readline().strip()
    arm_clock_freq = os.popen('vcgencmd measure_clock arm').readline().strip()[14:]
    disk_usage = os.popen('df -h /').readlines()[1].split()[4]
    gpu_temp = os.popen('vcgencmd measure_temp').readline().strip()[5:]  # Get GPU temperature
    return {
        "Core Temperature": core_temp,
        "Voltage": voltage,
        "ARM Clock Frequency": arm_clock_freq,
        "Disk Usage": disk_usage,
        "GPU Temperature": gpu_temp

# Function to create a data packet containing system information and iteration count
def create_data_packet(iteration_count):
    system_info = get_system_info()
    data = {
        "Iteration Count": iteration_count,
        **system_info
    }
    return data

# Function to send data to the server
def send_data_to_server(data, server_socket):
    try:
        json_data = json.dumps(data)
        server_socket.send(json_data.encode('utf-8'))
        return True
    except Exception as e:
        print(f"Error sending data: {str(e)}")
        return False
